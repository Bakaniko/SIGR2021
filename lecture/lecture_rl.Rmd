---
title: "GIS and mapping"
subtitle: "A lecture on the GIS and mapping ecosystem of R: packages, reading, writing"
author: "Robin Lovelace & Jakub Nowosad"
date: ""
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["xaringan-themer.css", "style.css"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: 16:9
      titleSlideClass: [left, bottom, inverse]
---

```{r setup, include=FALSE, purl=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = FALSE)
```

# Contents

.left-column[

<!-- By Robin: -->

### Introduction to Geocomputation with R

<!-- By Robin: -->

### Key packages and data classes

<!-- ### Example: transport data -->

<!-- By Jakub: -->
### Data visualisation with tmap

<!-- By Jakub: -->
### Preparation for the workshop

]

.right-column[

```{r, out.width="80%", message=FALSE}
library(tmap)
tmap_mode("view")
locations = tmaptools::geocode_OSM(c("leeds", "poznan", "nurnberg", "saint-pierre-d'oleron"), as.sf = TRUE)
tm_shape(locations) +
  tm_dots(col = "red", size = 0.1, alpha = 0.5, popup.vars = "query") +
  tm_text("query")
```


]

---

# What can you do with geographic data + R?

--

.left-column[

- Exploratory data analysis ([EDA](https://r4ds.had.co.nz/exploratory-data-analysis.html))
- Output data in different formats (e.g. creating a .GeoTIFF or .shp file to share with others)
- Data processing (e.g. adding new variables, 'adding value')
- Data transformation (e.g. [changing CRS](https://geocompr.robinlovelace.net/reproj-geo-data.html), reducing size via simplification/aggregation)
- Data [visualisation](https://geocompr.robinlovelace.net/adv-map.html#mapping-applications)
- Web application development
- Software development e.g. to share new methdods
- Any field of research that uses geographic data!

]

--


.right-column[

```{r, out.width="100%"}
knitr::include_graphics("https://user-images.githubusercontent.com/1825120/38543030-5794b6f0-3c9b-11e8-9da9-10ec1f3ea726.gif")
```

]


---

# R is a (geo)computational power tool! 

.left-column[

#### R's flexibility enables 100s of people to create new tools

#### R can be seen as the 'engine' that enables functionality provided in packages

![](https://openclipart.org/image/800px/98191)

#### That provides flexibility but has some consequences...

]

--

.right-column[

### It's important to use the right tool for the job

![](https://user-images.githubusercontent.com/1825120/123144850-0f104d00-d454-11eb-80c1-5fb860d10482.gif)

]

---

# Key packages in the R ecosystem

<!-- - sf ... -->

<!-- idea: should be a table -->

#### These packages provide class systems, the foundations on which other packages build

---

# sf



---

# raster



---

# terra


---

# stars


---

# Packages building on these data classes

Work in progress...

---

background-image: url("https://camo.githubusercontent.com/f032cac4c2273236d3d70f384b34f76a5cf70f9d00d4c868bed0ac3f5c3b52d4/68747470733a2f2f692e696d6775722e636f6d2f415478487764462e706e67")

# Spatial data classes

<br>

## Vector

<br>
<br>
<br>
<br>
<br>
<br>
<br>

## Raster

<br>
<br>
<br>

Reproducible source code: https://github.com/Robinlovelace/geocompr/blob/master/code/frontcover.R

---

# The sf class for working with spatial vector data

---

# The raster class for working with spatial raster data

<!-- --- -->

<!-- Example of domain specific package: stplanr? -->

---

# Data analysis pipelines

![](https://user-images.githubusercontent.com/1825120/123537471-892c2480-d727-11eb-81d2-25586aab9c3f.png)


---

# Creating functions and packages



---

## Links for further reading and study

- On data visualisation, see Chapter 15 of Claus Wilke's open access Data Visualisation book: https://clauswilke.com/dataviz/geospatial-data.html

